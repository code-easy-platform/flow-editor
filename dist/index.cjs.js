"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=require("react"),gr=require("react-dom"),w=require("react-observing"),kt=require("react-use-drag-and-drop"),Ze=require("uuid");function wr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var He={exports:{}},Te={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bt;function Er(){if(bt)return Te;bt=1;var e=g,r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function f(i,c,u){var p,O={},h=null,E=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(E=c.ref);for(p in c)n.call(c,p)&&!s.hasOwnProperty(p)&&(O[p]=c[p]);if(i&&i.defaultProps)for(p in c=i.defaultProps,c)O[p]===void 0&&(O[p]=c[p]);return{$$typeof:r,type:i,key:h,ref:E,props:O,_owner:a.current}}return Te.Fragment=o,Te.jsx=f,Te.jsxs=f,Te}var Re={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mt;function xr(){return mt||(mt=1,process.env.NODE_ENV!=="production"&&function(){var e=g,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),i=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),x=Symbol.iterator,R="@@iterator";function _(t){if(t===null||typeof t!="object")return null;var d=x&&t[x]||t[R];return typeof d=="function"?d:null}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function A(t){{for(var d=arguments.length,b=new Array(d>1?d-1:0),j=1;j<d;j++)b[j-1]=arguments[j];L("error",t,b)}}function L(t,d,b){{var j=D.ReactDebugCurrentFrame,H=j.getStackAddendum();H!==""&&(d+="%s",b=b.concat([H]));var ee=b.map(function(X){return String(X)});ee.unshift("Warning: "+d),Function.prototype.apply.call(console[t],console,ee)}}var M=!1,l=!1,z=!1,P=!1,F=!1,te;te=Symbol.for("react.module.reference");function U(t){return!!(typeof t=="string"||typeof t=="function"||t===n||t===s||F||t===a||t===u||t===p||P||t===E||M||l||z||typeof t=="object"&&t!==null&&(t.$$typeof===h||t.$$typeof===O||t.$$typeof===f||t.$$typeof===i||t.$$typeof===c||t.$$typeof===te||t.getModuleId!==void 0))}function N(t,d,b){var j=t.displayName;if(j)return j;var H=d.displayName||d.name||"";return H!==""?b+"("+H+")":b}function re(t){return t.displayName||"Context"}function ie(t){if(t==null)return null;if(typeof t.tag=="number"&&A("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case n:return"Fragment";case o:return"Portal";case s:return"Profiler";case a:return"StrictMode";case u:return"Suspense";case p:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case i:var d=t;return re(d)+".Consumer";case f:var b=t;return re(b._context)+".Provider";case c:return N(t,t.render,"ForwardRef");case O:var j=t.displayName||null;return j!==null?j:ie(t.type)||"Memo";case h:{var H=t,ee=H._payload,X=H._init;try{return ie(X(ee))}catch{return null}}}return null}var Z=Object.assign,G=0,Q,oe,se,ue,v,y,k;function S(){}S.__reactDisabledLog=!0;function T(){{if(G===0){Q=console.log,oe=console.info,se=console.warn,ue=console.error,v=console.group,y=console.groupCollapsed,k=console.groupEnd;var t={configurable:!0,enumerable:!0,value:S,writable:!0};Object.defineProperties(console,{info:t,log:t,warn:t,error:t,group:t,groupCollapsed:t,groupEnd:t})}G++}}function Y(){{if(G--,G===0){var t={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Z({},t,{value:Q}),info:Z({},t,{value:oe}),warn:Z({},t,{value:se}),error:Z({},t,{value:ue}),group:Z({},t,{value:v}),groupCollapsed:Z({},t,{value:y}),groupEnd:Z({},t,{value:k})})}G<0&&A("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var I=D.ReactCurrentDispatcher,$;function W(t,d,b){{if($===void 0)try{throw Error()}catch(H){var j=H.stack.trim().match(/\n( *(at )?)/);$=j&&j[1]||""}return`
`+$+t}}var B=!1,V;{var ce=typeof WeakMap=="function"?WeakMap:Map;V=new ce}function m(t,d){if(!t||B)return"";{var b=V.get(t);if(b!==void 0)return b}var j;B=!0;var H=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ee;ee=I.current,I.current=null,T();try{if(d){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(he){j=he}Reflect.construct(t,[],X)}else{try{X.call()}catch(he){j=he}t.call(X.prototype)}}else{try{throw Error()}catch(he){j=he}t()}}catch(he){if(he&&j&&typeof he.stack=="string"){for(var q=he.stack.split(`
`),le=j.stack.split(`
`),ne=q.length-1,ae=le.length-1;ne>=1&&ae>=0&&q[ne]!==le[ae];)ae--;for(;ne>=1&&ae>=0;ne--,ae--)if(q[ne]!==le[ae]){if(ne!==1||ae!==1)do if(ne--,ae--,ae<0||q[ne]!==le[ae]){var de=`
`+q[ne].replace(" at new "," at ");return t.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",t.displayName)),typeof t=="function"&&V.set(t,de),de}while(ne>=1&&ae>=0);break}}}finally{B=!1,I.current=ee,Y(),Error.prepareStackTrace=H}var Ee=t?t.displayName||t.name:"",yt=Ee?W(Ee):"";return typeof t=="function"&&V.set(t,yt),yt}function fe(t,d,b){return m(t,!1)}function ge(t){var d=t.prototype;return!!(d&&d.isReactComponent)}function ye(t,d,b){if(t==null)return"";if(typeof t=="function")return m(t,ge(t));if(typeof t=="string")return W(t);switch(t){case u:return W("Suspense");case p:return W("SuspenseList")}if(typeof t=="object")switch(t.$$typeof){case c:return fe(t.render);case O:return ye(t.type,d,b);case h:{var j=t,H=j._payload,ee=j._init;try{return ye(ee(H),d,b)}catch{}}}return""}var je=Object.prototype.hasOwnProperty,ot={},at=D.ReactDebugCurrentFrame;function ke(t){if(t){var d=t._owner,b=ye(t.type,t._source,d?d.type:null);at.setExtraStackFrame(b)}else at.setExtraStackFrame(null)}function Qt(t,d,b,j,H){{var ee=Function.call.bind(je);for(var X in t)if(ee(t,X)){var q=void 0;try{if(typeof t[X]!="function"){var le=Error((j||"React class")+": "+b+" type `"+X+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[X]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw le.name="Invariant Violation",le}q=t[X](d,X,j,b,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ne){q=ne}q&&!(q instanceof Error)&&(ke(H),A("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",j||"React class",b,X,typeof q),ke(null)),q instanceof Error&&!(q.message in ot)&&(ot[q.message]=!0,ke(H),A("Failed %s type: %s",b,q.message),ke(null))}}}var er=Array.isArray;function De(t){return er(t)}function tr(t){{var d=typeof Symbol=="function"&&Symbol.toStringTag,b=d&&t[Symbol.toStringTag]||t.constructor.name||"Object";return b}}function rr(t){try{return it(t),!1}catch{return!0}}function it(t){return""+t}function st(t){if(rr(t))return A("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",tr(t)),it(t)}var _e=D.ReactCurrentOwner,nr={key:!0,ref:!0,__self:!0,__source:!0},ut,ct,$e;$e={};function or(t){if(je.call(t,"ref")){var d=Object.getOwnPropertyDescriptor(t,"ref").get;if(d&&d.isReactWarning)return!1}return t.ref!==void 0}function ar(t){if(je.call(t,"key")){var d=Object.getOwnPropertyDescriptor(t,"key").get;if(d&&d.isReactWarning)return!1}return t.key!==void 0}function ir(t,d){if(typeof t.ref=="string"&&_e.current&&d&&_e.current.stateNode!==d){var b=ie(_e.current.type);$e[b]||(A('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ie(_e.current.type),t.ref),$e[b]=!0)}}function sr(t,d){{var b=function(){ut||(ut=!0,A("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",d))};b.isReactWarning=!0,Object.defineProperty(t,"key",{get:b,configurable:!0})}}function ur(t,d){{var b=function(){ct||(ct=!0,A("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",d))};b.isReactWarning=!0,Object.defineProperty(t,"ref",{get:b,configurable:!0})}}var cr=function(t,d,b,j,H,ee,X){var q={$$typeof:r,type:t,key:d,ref:b,props:X,_owner:ee};return q._store={},Object.defineProperty(q._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(q,"_self",{configurable:!1,enumerable:!1,writable:!1,value:j}),Object.defineProperty(q,"_source",{configurable:!1,enumerable:!1,writable:!1,value:H}),Object.freeze&&(Object.freeze(q.props),Object.freeze(q)),q};function lr(t,d,b,j,H){{var ee,X={},q=null,le=null;b!==void 0&&(st(b),q=""+b),ar(d)&&(st(d.key),q=""+d.key),or(d)&&(le=d.ref,ir(d,H));for(ee in d)je.call(d,ee)&&!nr.hasOwnProperty(ee)&&(X[ee]=d[ee]);if(t&&t.defaultProps){var ne=t.defaultProps;for(ee in ne)X[ee]===void 0&&(X[ee]=ne[ee])}if(q||le){var ae=typeof t=="function"?t.displayName||t.name||"Unknown":t;q&&sr(X,ae),le&&ur(X,ae)}return cr(t,q,le,H,j,_e.current,X)}}var Le=D.ReactCurrentOwner,lt=D.ReactDebugCurrentFrame;function we(t){if(t){var d=t._owner,b=ye(t.type,t._source,d?d.type:null);lt.setExtraStackFrame(b)}else lt.setExtraStackFrame(null)}var Fe;Fe=!1;function Ye(t){return typeof t=="object"&&t!==null&&t.$$typeof===r}function ft(){{if(Le.current){var t=ie(Le.current.type);if(t)return`

Check the render method of \``+t+"`."}return""}}function fr(t){{if(t!==void 0){var d=t.fileName.replace(/^.*[\\\/]/,""),b=t.lineNumber;return`

Check your code at `+d+":"+b+"."}return""}}var dt={};function dr(t){{var d=ft();if(!d){var b=typeof t=="string"?t:t.displayName||t.name;b&&(d=`

Check the top-level render call using <`+b+">.")}return d}}function vt(t,d){{if(!t._store||t._store.validated||t.key!=null)return;t._store.validated=!0;var b=dr(d);if(dt[b])return;dt[b]=!0;var j="";t&&t._owner&&t._owner!==Le.current&&(j=" It was passed a child from "+ie(t._owner.type)+"."),we(t),A('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',b,j),we(null)}}function pt(t,d){{if(typeof t!="object")return;if(De(t))for(var b=0;b<t.length;b++){var j=t[b];Ye(j)&&vt(j,d)}else if(Ye(t))t._store&&(t._store.validated=!0);else if(t){var H=_(t);if(typeof H=="function"&&H!==t.entries)for(var ee=H.call(t),X;!(X=ee.next()).done;)Ye(X.value)&&vt(X.value,d)}}}function vr(t){{var d=t.type;if(d==null||typeof d=="string")return;var b;if(typeof d=="function")b=d.propTypes;else if(typeof d=="object"&&(d.$$typeof===c||d.$$typeof===O))b=d.propTypes;else return;if(b){var j=ie(d);Qt(b,t.props,"prop",j,t)}else if(d.PropTypes!==void 0&&!Fe){Fe=!0;var H=ie(d);A("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",H||"Unknown")}typeof d.getDefaultProps=="function"&&!d.getDefaultProps.isReactClassApproved&&A("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function pr(t){{for(var d=Object.keys(t.props),b=0;b<d.length;b++){var j=d[b];if(j!=="children"&&j!=="key"){we(t),A("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",j),we(null);break}}t.ref!==null&&(we(t),A("Invalid attribute `ref` supplied to `React.Fragment`."),we(null))}}function ht(t,d,b,j,H,ee){{var X=U(t);if(!X){var q="";(t===void 0||typeof t=="object"&&t!==null&&Object.keys(t).length===0)&&(q+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var le=fr(H);le?q+=le:q+=ft();var ne;t===null?ne="null":De(t)?ne="array":t!==void 0&&t.$$typeof===r?(ne="<"+(ie(t.type)||"Unknown")+" />",q=" Did you accidentally export a JSX literal instead of a component?"):ne=typeof t,A("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ne,q)}var ae=lr(t,d,b,H,ee);if(ae==null)return ae;if(X){var de=d.children;if(de!==void 0)if(j)if(De(de)){for(var Ee=0;Ee<de.length;Ee++)pt(de[Ee],t);Object.freeze&&Object.freeze(de)}else A("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else pt(de,t)}return t===n?pr(ae):vr(ae),ae}}function hr(t,d,b){return ht(t,d,b,!0)}function yr(t,d,b){return ht(t,d,b,!1)}var br=yr,mr=hr;Re.Fragment=n,Re.jsx=br,Re.jsxs=mr}()),Re}process.env.NODE_ENV==="production"?He.exports=Er():He.exports=xr();var C=He.exports,xe={},Se={},Ge={exports:{}},Me={exports:{}},J={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt;function Or(){if(gt)return J;gt=1;var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,f=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,O=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,E=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,R=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,D=e?Symbol.for("react.responder"):60118,A=e?Symbol.for("react.scope"):60119;function L(l){if(typeof l=="object"&&l!==null){var z=l.$$typeof;switch(z){case r:switch(l=l.type,l){case c:case u:case n:case s:case a:case O:return l;default:switch(l=l&&l.$$typeof,l){case i:case p:case x:case E:case f:return l;default:return z}}case o:return z}}}function M(l){return L(l)===u}return J.AsyncMode=c,J.ConcurrentMode=u,J.ContextConsumer=i,J.ContextProvider=f,J.Element=r,J.ForwardRef=p,J.Fragment=n,J.Lazy=x,J.Memo=E,J.Portal=o,J.Profiler=s,J.StrictMode=a,J.Suspense=O,J.isAsyncMode=function(l){return M(l)||L(l)===c},J.isConcurrentMode=M,J.isContextConsumer=function(l){return L(l)===i},J.isContextProvider=function(l){return L(l)===f},J.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===r},J.isForwardRef=function(l){return L(l)===p},J.isFragment=function(l){return L(l)===n},J.isLazy=function(l){return L(l)===x},J.isMemo=function(l){return L(l)===E},J.isPortal=function(l){return L(l)===o},J.isProfiler=function(l){return L(l)===s},J.isStrictMode=function(l){return L(l)===a},J.isSuspense=function(l){return L(l)===O},J.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===n||l===u||l===s||l===a||l===O||l===h||typeof l=="object"&&l!==null&&(l.$$typeof===x||l.$$typeof===E||l.$$typeof===f||l.$$typeof===i||l.$$typeof===p||l.$$typeof===_||l.$$typeof===D||l.$$typeof===A||l.$$typeof===R)},J.typeOf=L,J}var K={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt;function _r(){return wt||(wt=1,process.env.NODE_ENV!=="production"&&function(){var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,f=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,O=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,E=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,R=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,D=e?Symbol.for("react.responder"):60118,A=e?Symbol.for("react.scope"):60119;function L(m){return typeof m=="string"||typeof m=="function"||m===n||m===u||m===s||m===a||m===O||m===h||typeof m=="object"&&m!==null&&(m.$$typeof===x||m.$$typeof===E||m.$$typeof===f||m.$$typeof===i||m.$$typeof===p||m.$$typeof===_||m.$$typeof===D||m.$$typeof===A||m.$$typeof===R)}function M(m){if(typeof m=="object"&&m!==null){var fe=m.$$typeof;switch(fe){case r:var ge=m.type;switch(ge){case c:case u:case n:case s:case a:case O:return ge;default:var ye=ge&&ge.$$typeof;switch(ye){case i:case p:case x:case E:case f:return ye;default:return fe}}case o:return fe}}}var l=c,z=u,P=i,F=f,te=r,U=p,N=n,re=x,ie=E,Z=o,G=s,Q=a,oe=O,se=!1;function ue(m){return se||(se=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),v(m)||M(m)===c}function v(m){return M(m)===u}function y(m){return M(m)===i}function k(m){return M(m)===f}function S(m){return typeof m=="object"&&m!==null&&m.$$typeof===r}function T(m){return M(m)===p}function Y(m){return M(m)===n}function I(m){return M(m)===x}function $(m){return M(m)===E}function W(m){return M(m)===o}function B(m){return M(m)===s}function V(m){return M(m)===a}function ce(m){return M(m)===O}K.AsyncMode=l,K.ConcurrentMode=z,K.ContextConsumer=P,K.ContextProvider=F,K.Element=te,K.ForwardRef=U,K.Fragment=N,K.Lazy=re,K.Memo=ie,K.Portal=Z,K.Profiler=G,K.StrictMode=Q,K.Suspense=oe,K.isAsyncMode=ue,K.isConcurrentMode=v,K.isContextConsumer=y,K.isContextProvider=k,K.isElement=S,K.isForwardRef=T,K.isFragment=Y,K.isLazy=I,K.isMemo=$,K.isPortal=W,K.isProfiler=B,K.isStrictMode=V,K.isSuspense=ce,K.isValidElementType=L,K.typeOf=M}()),K}var Et;function Mt(){return Et||(Et=1,process.env.NODE_ENV==="production"?Me.exports=Or():Me.exports=_r()),Me.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var We,xt;function Tr(){if(xt)return We;xt=1;var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function n(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function a(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var f={},i=0;i<10;i++)f["_"+String.fromCharCode(i)]=i;var c=Object.getOwnPropertyNames(f).map(function(p){return f[p]});if(c.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(p){u[p]=p}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return We=a()?Object.assign:function(s,f){for(var i,c=n(s),u,p=1;p<arguments.length;p++){i=Object(arguments[p]);for(var O in i)r.call(i,O)&&(c[O]=i[O]);if(e){u=e(i);for(var h=0;h<u.length;h++)o.call(i,u[h])&&(c[u[h]]=i[u[h]])}}return c},We}var Ve,Ot;function Qe(){if(Ot)return Ve;Ot=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ve=e,Ve}var qe,_t;function It(){return _t||(_t=1,qe=Function.call.bind(Object.prototype.hasOwnProperty)),qe}var Ue,Tt;function Rr(){if(Tt)return Ue;Tt=1;var e=function(){};if(process.env.NODE_ENV!=="production"){var r=Qe(),o={},n=It();e=function(s){var f="Warning: "+s;typeof console<"u"&&console.error(f);try{throw new Error(f)}catch{}}}function a(s,f,i,c,u){if(process.env.NODE_ENV!=="production"){for(var p in s)if(n(s,p)){var O;try{if(typeof s[p]!="function"){var h=Error((c||"React class")+": "+i+" type `"+p+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[p]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw h.name="Invariant Violation",h}O=s[p](f,p,c,i,null,r)}catch(x){O=x}if(O&&!(O instanceof Error)&&e((c||"React class")+": type specification of "+i+" `"+p+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof O+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),O instanceof Error&&!(O.message in o)){o[O.message]=!0;var E=u?u():"";e("Failed "+i+" type: "+O.message+(E??""))}}}}return a.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(o={})},Ue=a,Ue}var ze,Rt;function Cr(){if(Rt)return ze;Rt=1;var e=Mt(),r=Tr(),o=Qe(),n=It(),a=Rr(),s=function(){};process.env.NODE_ENV!=="production"&&(s=function(i){var c="Warning: "+i;typeof console<"u"&&console.error(c);try{throw new Error(c)}catch{}});function f(){return null}return ze=function(i,c){var u=typeof Symbol=="function"&&Symbol.iterator,p="@@iterator";function O(v){var y=v&&(u&&v[u]||v[p]);if(typeof y=="function")return y}var h="<<anonymous>>",E={array:D("array"),bigint:D("bigint"),bool:D("boolean"),func:D("function"),number:D("number"),object:D("object"),string:D("string"),symbol:D("symbol"),any:A(),arrayOf:L,element:M(),elementType:l(),instanceOf:z,node:U(),objectOf:F,oneOf:P,oneOfType:te,shape:re,exact:ie};function x(v,y){return v===y?v!==0||1/v===1/y:v!==v&&y!==y}function R(v,y){this.message=v,this.data=y&&typeof y=="object"?y:{},this.stack=""}R.prototype=Error.prototype;function _(v){if(process.env.NODE_ENV!=="production")var y={},k=0;function S(Y,I,$,W,B,V,ce){if(W=W||h,V=V||$,ce!==o){if(c){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var fe=W+":"+$;!y[fe]&&k<3&&(s("You are manually calling a React.PropTypes validation function for the `"+V+"` prop on `"+W+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),y[fe]=!0,k++)}}return I[$]==null?Y?I[$]===null?new R("The "+B+" `"+V+"` is marked as required "+("in `"+W+"`, but its value is `null`.")):new R("The "+B+" `"+V+"` is marked as required in "+("`"+W+"`, but its value is `undefined`.")):null:v(I,$,W,B,V)}var T=S.bind(null,!1);return T.isRequired=S.bind(null,!0),T}function D(v){function y(k,S,T,Y,I,$){var W=k[S],B=Q(W);if(B!==v){var V=oe(W);return new R("Invalid "+Y+" `"+I+"` of type "+("`"+V+"` supplied to `"+T+"`, expected ")+("`"+v+"`."),{expectedType:v})}return null}return _(y)}function A(){return _(f)}function L(v){function y(k,S,T,Y,I){if(typeof v!="function")return new R("Property `"+I+"` of component `"+T+"` has invalid PropType notation inside arrayOf.");var $=k[S];if(!Array.isArray($)){var W=Q($);return new R("Invalid "+Y+" `"+I+"` of type "+("`"+W+"` supplied to `"+T+"`, expected an array."))}for(var B=0;B<$.length;B++){var V=v($,B,T,Y,I+"["+B+"]",o);if(V instanceof Error)return V}return null}return _(y)}function M(){function v(y,k,S,T,Y){var I=y[k];if(!i(I)){var $=Q(I);return new R("Invalid "+T+" `"+Y+"` of type "+("`"+$+"` supplied to `"+S+"`, expected a single ReactElement."))}return null}return _(v)}function l(){function v(y,k,S,T,Y){var I=y[k];if(!e.isValidElementType(I)){var $=Q(I);return new R("Invalid "+T+" `"+Y+"` of type "+("`"+$+"` supplied to `"+S+"`, expected a single ReactElement type."))}return null}return _(v)}function z(v){function y(k,S,T,Y,I){if(!(k[S]instanceof v)){var $=v.name||h,W=ue(k[S]);return new R("Invalid "+Y+" `"+I+"` of type "+("`"+W+"` supplied to `"+T+"`, expected ")+("instance of `"+$+"`."))}return null}return _(y)}function P(v){if(!Array.isArray(v))return process.env.NODE_ENV!=="production"&&(arguments.length>1?s("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):s("Invalid argument supplied to oneOf, expected an array.")),f;function y(k,S,T,Y,I){for(var $=k[S],W=0;W<v.length;W++)if(x($,v[W]))return null;var B=JSON.stringify(v,function(ce,m){var fe=oe(m);return fe==="symbol"?String(m):m});return new R("Invalid "+Y+" `"+I+"` of value `"+String($)+"` "+("supplied to `"+T+"`, expected one of "+B+"."))}return _(y)}function F(v){function y(k,S,T,Y,I){if(typeof v!="function")return new R("Property `"+I+"` of component `"+T+"` has invalid PropType notation inside objectOf.");var $=k[S],W=Q($);if(W!=="object")return new R("Invalid "+Y+" `"+I+"` of type "+("`"+W+"` supplied to `"+T+"`, expected an object."));for(var B in $)if(n($,B)){var V=v($,B,T,Y,I+"."+B,o);if(V instanceof Error)return V}return null}return _(y)}function te(v){if(!Array.isArray(v))return process.env.NODE_ENV!=="production"&&s("Invalid argument supplied to oneOfType, expected an instance of array."),f;for(var y=0;y<v.length;y++){var k=v[y];if(typeof k!="function")return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+se(k)+" at index "+y+"."),f}function S(T,Y,I,$,W){for(var B=[],V=0;V<v.length;V++){var ce=v[V],m=ce(T,Y,I,$,W,o);if(m==null)return null;m.data&&n(m.data,"expectedType")&&B.push(m.data.expectedType)}var fe=B.length>0?", expected one of type ["+B.join(", ")+"]":"";return new R("Invalid "+$+" `"+W+"` supplied to "+("`"+I+"`"+fe+"."))}return _(S)}function U(){function v(y,k,S,T,Y){return Z(y[k])?null:new R("Invalid "+T+" `"+Y+"` supplied to "+("`"+S+"`, expected a ReactNode."))}return _(v)}function N(v,y,k,S,T){return new R((v||"React class")+": "+y+" type `"+k+"."+S+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+T+"`.")}function re(v){function y(k,S,T,Y,I){var $=k[S],W=Q($);if(W!=="object")return new R("Invalid "+Y+" `"+I+"` of type `"+W+"` "+("supplied to `"+T+"`, expected `object`."));for(var B in v){var V=v[B];if(typeof V!="function")return N(T,Y,I,B,oe(V));var ce=V($,B,T,Y,I+"."+B,o);if(ce)return ce}return null}return _(y)}function ie(v){function y(k,S,T,Y,I){var $=k[S],W=Q($);if(W!=="object")return new R("Invalid "+Y+" `"+I+"` of type `"+W+"` "+("supplied to `"+T+"`, expected `object`."));var B=r({},k[S],v);for(var V in B){var ce=v[V];if(n(v,V)&&typeof ce!="function")return N(T,Y,I,V,oe(ce));if(!ce)return new R("Invalid "+Y+" `"+I+"` key `"+V+"` supplied to `"+T+"`.\nBad object: "+JSON.stringify(k[S],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(v),null,"  "));var m=ce($,V,T,Y,I+"."+V,o);if(m)return m}return null}return _(y)}function Z(v){switch(typeof v){case"number":case"string":case"undefined":return!0;case"boolean":return!v;case"object":if(Array.isArray(v))return v.every(Z);if(v===null||i(v))return!0;var y=O(v);if(y){var k=y.call(v),S;if(y!==v.entries){for(;!(S=k.next()).done;)if(!Z(S.value))return!1}else for(;!(S=k.next()).done;){var T=S.value;if(T&&!Z(T[1]))return!1}}else return!1;return!0;default:return!1}}function G(v,y){return v==="symbol"?!0:y?y["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&y instanceof Symbol:!1}function Q(v){var y=typeof v;return Array.isArray(v)?"array":v instanceof RegExp?"object":G(y,v)?"symbol":y}function oe(v){if(typeof v>"u"||v===null)return""+v;var y=Q(v);if(y==="object"){if(v instanceof Date)return"date";if(v instanceof RegExp)return"regexp"}return y}function se(v){var y=oe(v);switch(y){case"array":case"object":return"an "+y;case"boolean":case"date":case"regexp":return"a "+y;default:return y}}function ue(v){return!v.constructor||!v.constructor.name?h:v.constructor.name}return E.checkPropTypes=a,E.resetWarningCache=a.resetWarningCache,E.PropTypes=E,E},ze}var Ne,Ct;function Sr(){if(Ct)return Ne;Ct=1;var e=Qe();function r(){}function o(){}return o.resetWarningCache=r,Ne=function(){function n(f,i,c,u,p,O){if(O!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function a(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:o,resetWarningCache:r};return s.PropTypes=s,s},Ne}if(process.env.NODE_ENV!=="production"){var Pr=Mt(),jr=!0;Ge.exports=Cr()(Pr.isElement,jr)}else Ge.exports=Sr()();var At=Ge.exports,ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.FrameContextConsumer=ve.FrameContextProvider=ve.useFrame=ve.FrameContext=void 0;var kr=g,Dt=Mr(kr);function Mr(e){return e&&e.__esModule?e:{default:e}}var $t=void 0,Lt=void 0;typeof document<"u"&&($t=document);typeof window<"u"&&(Lt=window);var et=ve.FrameContext=Dt.default.createContext({document:$t,window:Lt});ve.useFrame=function(){return Dt.default.useContext(et)};var Ir=et.Provider,Ar=et.Consumer;ve.FrameContextProvider=Ir;ve.FrameContextConsumer=Ar;var tt={};Object.defineProperty(tt,"__esModule",{value:!0});var Dr=function(){function e(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,o,n){return o&&e(r.prototype,o),n&&e(r,n),r}}(),Je=g;Ft(Je);var $r=At,Xe=Ft($r);function Ft(e){return e&&e.__esModule?e:{default:e}}function Lr(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Fr(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Yr(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var Yt=function(e){Yr(r,e);function r(){return Lr(this,r),Fr(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Dr(r,[{key:"componentDidMount",value:function(){this.props.contentDidMount()}},{key:"componentDidUpdate",value:function(){this.props.contentDidUpdate()}},{key:"render",value:function(){return Je.Children.only(this.props.children)}}]),r}(Je.Component);Yt.propTypes={children:Xe.default.element.isRequired,contentDidMount:Xe.default.func.isRequired,contentDidUpdate:Xe.default.func.isRequired};tt.default=Yt;Object.defineProperty(Se,"__esModule",{value:!0});Se.Frame=void 0;var Ke=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},Wr=function(){function e(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,o,n){return o&&e(r.prototype,o),n&&e(r,n),r}}(),Wt=g,be=Ae(Wt),Vr=gr,St=Ae(Vr),qr=At,pe=Ae(qr),Ur=ve,zr=tt,Nr=Ae(zr);function Ae(e){return e&&e.__esModule?e:{default:e}}function Xr(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Br(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Hr(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var rt=Se.Frame=function(e){Hr(r,e);function r(o,n){Xr(this,r);var a=Br(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o,n));return a.setRef=function(s){a.nodeRef.current=s;var f=a.props.forwardedRef;typeof f=="function"?f(s):f&&(f.current=s)},a.handleLoad=function(){clearInterval(a.loadCheck),a.state.iframeLoaded||a.setState({iframeLoaded:!0})},a.loadCheck=function(){return setInterval(function(){a.handleLoad()},500)},a._isMounted=!1,a.nodeRef=be.default.createRef(),a.state={iframeLoaded:!1},a}return Wr(r,[{key:"componentDidMount",value:function(){this._isMounted=!0;var n=this.getDoc();n&&this.nodeRef.current.contentWindow.addEventListener("DOMContentLoaded",this.handleLoad)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.nodeRef.current.removeEventListener("DOMContentLoaded",this.handleLoad)}},{key:"getDoc",value:function(){return this.nodeRef.current?this.nodeRef.current.contentDocument:null}},{key:"getMountTarget",value:function(){var n=this.getDoc();return this.props.mountTarget?n.querySelector(this.props.mountTarget):n.body.children[0]}},{key:"renderFrameContents",value:function(){if(!this._isMounted)return null;var n=this.getDoc();if(!n)return null;var a=this.props.contentDidMount,s=this.props.contentDidUpdate,f=n.defaultView||n.parentView,i=be.default.createElement(Nr.default,{contentDidMount:a,contentDidUpdate:s},be.default.createElement(Ur.FrameContextProvider,{value:{document:n,window:f}},be.default.createElement("div",{className:"frame-content"},this.props.children))),c=this.getMountTarget();return[St.default.createPortal(this.props.head,this.getDoc().head),St.default.createPortal(i,c)]}},{key:"render",value:function(){var n=Ke({},this.props,{srcDoc:this.props.initialContent,children:void 0});return delete n.head,delete n.initialContent,delete n.mountTarget,delete n.contentDidMount,delete n.contentDidUpdate,delete n.forwardedRef,be.default.createElement("iframe",Ke({},n,{ref:this.setRef,onLoad:this.handleLoad}),this.state.iframeLoaded&&this.renderFrameContents())}}]),r}(Wt.Component);rt.propTypes={style:pe.default.object,head:pe.default.node,initialContent:pe.default.string,mountTarget:pe.default.string,contentDidMount:pe.default.func,contentDidUpdate:pe.default.func,children:pe.default.oneOfType([pe.default.element,pe.default.arrayOf(pe.default.element)])};rt.defaultProps={style:{},head:null,children:void 0,mountTarget:void 0,contentDidMount:function(){},contentDidUpdate:function(){},initialContent:'<!DOCTYPE html><html><head></head><body><div class="frame-root"></div></body></html>'};Se.default=be.default.forwardRef(function(e,r){return be.default.createElement(rt,Ke({},e,{forwardedRef:r}))});(function(e){Object.defineProperty(e,"__esModule",{value:!0});var r=Se;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n(r).default}});var o=ve;Object.defineProperty(e,"FrameContext",{enumerable:!0,get:function(){return o.FrameContext}}),Object.defineProperty(e,"FrameContextConsumer",{enumerable:!0,get:function(){return o.FrameContextConsumer}}),Object.defineProperty(e,"useFrame",{enumerable:!0,get:function(){return o.useFrame}});function n(a){return a&&a.__esModule?a:{default:a}}})(xe);const Gr=wr(xe),Vt=g.createContext({}),Jr=({children:e})=>{const r=g.useMemo(()=>({top:w.observe(0),left:w.observe(0)}),[]);return C.jsx(Vt.Provider,{value:r,children:e})},Pe=()=>g.useContext(Vt),qt=g.createContext(w.observe(1)),Kr=({children:e,value:r})=>{const o=g.useMemo(()=>w.observe(r<1?1:r),[r]);return C.jsx(qt.Provider,{value:o,children:e})},Oe=()=>g.useContext(qt),Ut=g.createContext(15),Zr=({children:e,value:r})=>C.jsx(Ut.Provider,{value:r<1?1:r,children:e}),Qr=()=>g.useContext(Ut),zt=g.createContext(w.observe(void 0)),en=({children:e})=>{const r=g.useMemo(()=>w.observe(void 0),[]);return C.jsx(zt.Provider,{value:r,children:e})},Nt=()=>g.useContext(zt),Xt=g.createContext({}),tn=({children:e,items:r})=>{const o=g.useRef(w.observe(r));g.useEffect(()=>{o.current.value=r},[r]);const n=g.useMemo(()=>w.selector({get:({get:i})=>{const c=[];return i(o.current).forEach((u,p,O)=>{i(u.connections).forEach(h=>{const E=O.find(x=>i(h.relatedId)===i(x.id));E&&c.push({top1:u.top,left1:u.left,top2:E.top,left2:E.left,width1:u.width,height1:u.height,width2:E.width,height2:E.height,nodeId:u.id,id:h.id,relatedNodeId:E.id,key:`line_key_${i(u.id)}_${i(E.id)}`,isCurved:w.selector(({get:x})=>x(E.connections).some(R=>x(R.relatedId)===x(u.id)))})})}),c}}),[]),a=g.useMemo(()=>({width:w.selector({get:({get:i})=>i(o.current).reduce((c,u)=>{const p=i(u.left)+i(u.width);return p>c?p:c},0)}),height:w.selector({get:({get:i})=>i(o.current).reduce((c,u)=>{const p=i(u.top)+i(u.height);return p>c?p:c},0)})}),[]),s=g.useMemo(()=>w.observe([]),[]),f=g.useMemo(()=>w.selector({get:({get:i})=>i(o.current).filter(u=>i(s).includes(i(u.id)))}),[s]);return C.jsx(Xt.Provider,{value:{flowStore:o.current,linesStore:n,boardSizes:a,selectedItems:f,selectedItemsId:s},children:e})},me=()=>g.useContext(Xt),Ie=()=>me().boardSizes,Bt=e=>{const{selectedItemsId:r}=me(),o=g.useRef(w.observe(r.value.includes(e)));return g.useEffect(()=>{const n=r.subscribe(a=>{const s=a.includes(e);w.set(o.current,f=>f!==s?s:f)});return()=>n.unsubscribe()},[r,e]),o.current},nt=()=>{const{selectedItemsId:e,linesStore:r}=me();return g.useCallback((o,n=!1)=>{if(typeof o=="string"){if(e.value.some(a=>a===o)&&!n)return;e.value.some(a=>a===o)?w.set(e,a=>{const s=a.filter(i=>i!==o).filter(i=>!r.value.some(c=>c.id.value===i)),f=r.value.filter(i=>s.includes(i.nodeId.value)&&s.includes(i.relatedNodeId.value)).map(i=>i.id.value);return[...s,...f]}):n?w.set(e,a=>{const s=[...a.filter(i=>!r.value.some(c=>c.id.value===i)),o],f=r.value.filter(i=>s.includes(i.nodeId.value)&&s.includes(i.relatedNodeId.value)).map(i=>i.id.value);return[...s,...f]}):w.set(e,[o])}else{if(o.sort().join()===e.value.sort().join())return;const a=[...o],s=r.value.filter(f=>a.includes(f.nodeId.value)&&a.includes(f.relatedNodeId.value)).map(f=>f.id.value);if([...a,...s].sort().join()===e.value.sort().join())return;w.set(e,[...a,...s])}},[e])},Ht=()=>{const{selectedItems:e}=me();return g.useCallback((r,o)=>{e.value.length!==0&&((e.value.every(n=>n.top.value>0)||o>0)&&e.value.forEach(n=>{w.set(n.top,a=>a+o<=0?0:a+o)}),(e.value.every(n=>n.left.value>0)||r>0)&&e.value.forEach(n=>{w.set(n.left,a=>a+r<=0?0:a+r)}))},[e])},rn=`
.draggable-container {
  top: 0;
  left: 0;
  z-index:1;
  cursor: move;
  display: flex;
  user-select: none;
  position: absolute;
  pointer-events: none;
  flex-direction: column;
  border: thin solid transparent;
}

.draggable-container-content {
  flex: 1;
  display: flex;
  overflow: auto;
  border-radius: 4px;
  pointer-events: auto;
  flex-direction: column;
}

.draggable-container-content::-webkit-scrollbar:horizontal {
  height: 8px;
}

.draggable-container-input {
  width: 10px;
  left: -17px;
  height: 10px;
  cursor: crosshair;
  border-radius: 50%;
  position: absolute;
  pointer-events: auto;
  border: 2px solid green;
  background-color: darkgreen;
}
.draggable-container-input:hover {
  background-color: green;
}

.draggable-container-output {
  width: 10px;
  right: -17px;
  height: 10px;
  cursor: crosshair;
  border-radius: 50%;
  position: absolute;
  pointer-events: auto;
  transition: all .1s;
  border: 2px solid crimson;
  background-color: darkslategray;
}
.draggable-container-output:hover {
  background-color: crimson;
}

.draggable-container-input[data-is-line-dragging=true], .draggable-container-output[data-is-line-dragging=true] {
  border: 2px solid lightgreen;
}

.draggable-container-input[data-is-line-dragging=true]:hover, .draggable-container-output[data-is-line-dragging=true]:hover {
  background-color: lightgreen;
}
`;function Pt(e,r){const o=e.width,n=e.height,a={x:e.x,y:e.y},s={x:r.x,y:r.y},f=o/2,i=n/2,c=a.x+f,u=a.y+i,p=s.x+r.width/2,O=s.y+r.height/2,h=(p-c)/(2*f)-(O-u)/(2*i),E=(p-c)/(2*f)+(O-u)/(2*i),x=1/(Math.abs(h)+Math.abs(E)||1),R=x*h,_=x*E,D=f*(R+_)+c,A=i*(-R+_)+u;return{x:D,y:A}}function jt(e,r){const o={x:e.x,y:e.y,measured:{width:e.width,height:e.height},...e},n=Math.round(o.x),a=Math.round(o.y),s=Math.round(r.x),f=Math.round(r.y);return s<=n+1?"left":s>=n+o.measured.width-1?"right":f<=a+1?"top":f>=o.y+o.measured.height-1?"bottom":"top"}function Gt(e,r){const o=Pt(e,r),n=Pt(r,e),a=jt(e,o),s=jt(r,n);return{sourcePos:a,targetPos:s,sourceX:o.x,sourceY:o.y,targetX:n.x,targetY:n.y}}function nn({sourceX:e,sourceY:r,targetX:o,targetY:n}){const a=Math.abs(o-e)/2,s=o<e?o+a:o-a,f=Math.abs(n-r)/2,i=n<r?n+f:n-f;return[s,i,a,f]}function Jt({sourceX:e,sourceY:r,targetX:o,targetY:n}){const[a,s,f,i]=nn({sourceX:e,sourceY:r,targetX:o,targetY:n});return[`M ${e},${r}L ${o},${n}`,{labelX:a,labelY:s,offsetX:f,offsetY:i}]}const Kt=({sourceX:e,sourceY:r,targetX:o,targetY:n},{offset:a})=>{const s=(e+o)/2,f=(r+n)/2,i=Math.atan2(n-r,o-e),c=a,u=a>=0?Math.max(a,c):Math.min(a,-c),p=-Math.abs(u),O=p*Math.cos(i+Math.PI/2),h=p*Math.sin(i+Math.PI/2),E=s+O,x=f+h;return[`M ${e} ${r} Q ${E} ${x} ${o} ${n}`,{sourceX:e,sourceY:r,controlX:E,controlY:x,targetX:o,targetY:n}]},on=()=>navigator.userAgent.toUpperCase().includes("MAC"),Ce=e=>on()?e.metaKey:e.ctrlKey,Be=(e,r=15)=>Math.round(e/r)*r,an=({nodeId:e,height:r,width:o,getIsDisabledCreateConnection:n,getIsDisabledDropConnection:a})=>{const s=w.useObserverValue(Nt()),{flowStore:f}=me(),i=g.useCallback(()=>{if(s&&s.nodeId!==e){for(const c of f.value)if(c.id.value===s.nodeId){if(s.type==="end"){if(a())return;if(!s.lineId){w.set(c.connections,u=>[...u,{id:w.observe(Ze.v4()),relatedId:w.observe(e)}]);return}w.set(c.connections,u=>(u.forEach(p=>{p.id.value===s.lineId&&(p.relatedId=w.observe(e))}),[...u]));return}if(n())return;w.set(c.connections,u=>{const p=u.find(h=>h.id.value===s.lineId);if(!p||p.relatedId.value===e)return u;const O=f.value.find(h=>h.id.value===e);return O?(w.set(O.connections,h=>[...h,{id:p.id,relatedId:p.relatedId}]),[...u.filter(h=>h.id.value!==s.lineId)]):u});return}}},[s,e,n,a]);return C.jsx(C.Fragment,{children:C.jsx("span",{onMouseUp:i,onMouseDown:c=>c.stopPropagation(),style:{top:-4,left:-4,width:o+8,height:r+8,position:"absolute",pointerEvents:s?"auto":"none"}})})},sn=({node:e})=>{const r=w.useObserverValue(e.id),o=Bt(r),n=Ht(),a=nt(),{selectedItemsId:s}=me(),f=Pe(),i=Oe(),c=Qr(),{window:u}=xe.useFrame(),[p,O]=w.useObserver(e.left),h=w.useObserverValue(e.height),[E,x]=w.useObserver(e.top),R=w.useObserverValue(e.width),_=g.useRef({top:0,left:0}),D=g.useCallback(M=>{if(a(r,Ce(M.nativeEvent)),!s.value.some(P=>P===r)||!u)return;const l=P=>{const F=(P.pageX-f.left.value)/i.value-_.current.left,te=(P.pageY-f.top.value)/i.value-_.current.top,U=Be(F,c)-e.left.value,N=Be(te,c)-e.top.value;U===0&&N===0||n(U,N)},z=()=>{u.removeEventListener("mousemove",l),u.removeEventListener("mouseup",z)};_.current={top:(M.nativeEvent.pageY-f.top.value)/i.value-E,left:(M.nativeEvent.pageX-f.left.value)/i.value-p},u.addEventListener("mousemove",l),u.addEventListener("mouseup",z)},[O,x,a,n,Be,c,r,u,f,i,e.left,e.top]),A=g.useMemo(()=>e.render({width:e.width,height:e.height,isSelected:o}),[e.render,e.width,e.height,o]),L=g.useMemo(()=>`translate(${p}px, ${E}px)`,[p,E]);return C.jsxs("div",{onMouseDown:D,className:"draggable-container",style:{width:R,height:h,transform:L},children:[C.jsx("div",{className:"draggable-container-content",children:A}),C.jsx(an,{nodeId:r,width:R,height:h,getIsDisabledDropConnection:()=>{var M;return!!((M=e.disableDropConnections)!=null&&M.call(e))},getIsDisabledCreateConnection:()=>{var M;return!!((M=e.disableCreateConnections)!=null&&M.call(e))}})]})},un=({children:e})=>{const r=w.useObserverValue(Ie().height),o=w.useObserverValue(Ie().width),n=w.useObserverValue(Oe());return C.jsx("svg",{style:{zoom:n,transition:"all",minWidth:"100vw",minHeight:"100vh",position:"absolute",pointerEvents:"none",width:(o+500)/n,height:(r+500)/n},children:e})},cn=({children:e})=>{const r=w.useObserverValue(Ie().height),o=w.useObserverValue(Ie().width),n=w.useObserverValue(Oe());return C.jsx("div",{style:{zoom:n,pointerEvents:"none",width:(o+500)/n,height:(r+500)/n},children:e})},ln=({onSelectionEnd:e,onSelectionStart:r,isDisabled:o=!1,onCoordsChange:n,boardRef:a})=>{const s=Pe(),f=Oe(),{window:i}=xe.useFrame(),[c,u]=g.useState(0),[p,O]=g.useState(!1),[h,E]=g.useState(0),[x,R]=g.useState(0),[_,D]=g.useState(0),A=g.useCallback(P=>{var U;if(!i||!((U=a.current)!=null&&U.isSameNode(P.target)))return;r==null||r(P);const F=N=>{R((N.pageX-s.left.value)/f.value),D((N.pageY-s.top.value)/f.value)},te=N=>{i.removeEventListener("mousemove",F),i.removeEventListener("mouseup",te),e==null||e(N),O(!1)};u((P.offsetX-s.left.value)/f.value),E((P.offsetY-s.top.value)/f.value),R((P.offsetX-s.left.value)/f.value),D((P.offsetY-s.top.value)/f.value),O(!0),i.addEventListener("mousemove",F),i.addEventListener("mouseup",te)},[i,s,f,a]);g.useEffect(()=>{if(i&&!o)return i.addEventListener("mousedown",A),()=>i.removeEventListener("mousedown",A)},[i,o,A]);const L=g.useMemo(()=>_-h>0||h<_?h:_,[_,h]),M=g.useMemo(()=>x-c>0||c<x?c:x,[x,c]),l=g.useMemo(()=>x-c>0||c-x<0?x-c:c-x,[x,c]),z=g.useMemo(()=>_-h>0||h-_<0?_-h:h-_,[_,h]);return g.useEffect(()=>{n==null||n({startY:L,startX:M,endY:L+z,endX:M+l})},[L,M,z,l]),o||!p?null:C.jsx("rect",{y:L,x:M,width:l,height:z,strokeWidth:1,stroke:"#999fff",fill:"#ffffff11"})},Zt=({lineId:e,isCurved:r,newConnection:o=!1,position1FromCenter:n=!1,disableStartDraggable:a=!1,nodeId:s,lineWidth:f,onDragLineEnd:i,onDragLineStart:c,...u})=>{const p=w.useSetObserver(Nt()),O=nt(),h=Pe(),E=Oe(),{window:x}=xe.useFrame(),R=g.useRef(!1),[_,D]=g.useState(u.top1),[A,L]=g.useState(u.top2),[M,l]=g.useState(u.left1),[z,P]=g.useState(u.left2),[F,te]=g.useState();g.useEffect(()=>{D(u.top1),L(u.top2),l(u.left1),P(u.left2)},[u.top1,u.top2,u.left1,u.left2]);const U=g.useMemo(()=>{const G=Gt({y:_-(F==="start"?10:5),x:M-(F==="start"?10:5),width:F==="start"?20:u.width1+10,height:F==="start"?20:u.height1+10},{y:A-(F==="end"?10:5),x:z-(F==="end"?10:5),width:F==="end"?20:u.width2+10,height:F==="end"?20:u.height2+10});if(r&&!F){const[Q]=Kt({sourceX:G.sourceX,sourceY:G.sourceY,targetX:G.targetX,targetY:G.targetY},{offset:35});return Q}else{const[Q]=Jt({sourceX:G.sourceX,sourceY:G.sourceY,targetX:G.targetX,targetY:G.targetY});return Q}},[r,F,_,A,M,z,u.width1,u.height1,u.width2,u.height2]),N=g.useCallback(Z=>{if(e&&O([e],Ce(Z.nativeEvent)),!x)return;const G=oe=>{R.current||(te("start"),c==null||c(),p({type:"start",nodeId:s,lineId:e}),R.current=!0);const se=(oe.pageX-h.left.value)/E.value,ue=(oe.pageY-h.top.value)/E.value;l(se),D(ue)},Q=()=>{R.current=!1,te(void 0),l(u.left1),p(void 0),D(u.top1),i==null||i(),x.removeEventListener("mousemove",G),x.removeEventListener("mouseup",Q)};x.addEventListener("mousemove",G),x.addEventListener("mouseup",Q)},[p,c,i,x,h,E,_,M,u.left1,u.top1,s,e]),re=g.useCallback(Z=>{if(e&&O([e],Ce(Z.nativeEvent)),!x)return;const G=oe=>{R.current||(te("end"),c==null||c(),p({type:"end",nodeId:s,lineId:e}),R.current=!0);const se=(oe.pageX-h.left.value)/E.value,ue=(oe.pageY-h.top.value)/E.value;P(se),L(ue)},Q=()=>{R.current=!1,te(void 0),P(u.left2),p(void 0),L(u.top2),i==null||i(),x.removeEventListener("mousemove",G),x.removeEventListener("mouseup",Q)};x.addEventListener("mousemove",G),x.addEventListener("mouseup",Q)},[p,c,i,x,h,E,u.left2,u.top2,s,e]),ie=g.useCallback(Z=>{const G=Z.currentTarget.getTotalLength(),Q=(Z.clientX-h.left.value)/E.value,oe=(Z.clientY-h.top.value)/E.value;let se=0,ue=1/0;const v=100;for(let S=0;S<=v;S++){const T=S/v*G,Y=Z.currentTarget.getPointAtLength(T),I=Math.sqrt(Math.pow(Q-Y.x,2)+Math.pow(oe-Y.y,2));I<ue&&(ue=I,se=T)}const y=G/2;se<=y?a||N(Z):re(Z)},[N,re,a,h,E]);return C.jsxs(C.Fragment,{children:[F&&C.jsx("path",{fill:"none",d:U,stroke:"#0f77bf",strokeLinecap:"round",strokeWidth:f,markerEnd:`url(#end-line-arrow-${e})`}),o&&C.jsx("rect",{x:M-6.5,fill:"transparent",width:u.width1+15,height:u.height1/2+15,onMouseDown:re,y:_+u.height1/2,style:{cursor:"crosshair",pointerEvents:F?"none":"auto"}}),!F&&!o&&C.jsx("path",{fill:"none",d:U,strokeWidth:14,stroke:"transparent",onMouseDown:ie,style:{cursor:"crosshair",pointerEvents:"auto"}})]})},fn=({onDrop:e,...r})=>{const[o,n]=g.useState(!1),[a,s]=g.useState(!1),f=w.useObserverValue(r.top1Observable),i=w.useObserverValue(r.top2Observable),c=w.useObserverValue(r.lineIdObservable),u=w.useObserverValue(r.left1Observable),p=w.useObserverValue(r.left2Observable),O=w.useObserverValue(r.blockIdObservable),h=w.useObserverValue(r.width1Observable),E=w.useObserverValue(r.width2Observable),x=w.useObserverValue(r.isCurvedObservable),R=w.useObserverValue(r.height1Observable),_=w.useObserverValue(r.height2Observable),D=w.useObserverValue(Bt(c)),A=g.useMemo(()=>2.5,[]),L=g.useMemo(()=>1,[]),M=g.useMemo(()=>{const P=Gt({y:f-5,x:u-5,width:h+10,height:R+10},{y:i-5,x:p-5,width:E+10,height:_+10});if(x){const[F]=Kt({sourceX:P.sourceX,sourceY:P.sourceY,targetX:P.targetX,targetY:P.targetY},{offset:35});return F}else{const[F]=Jt({sourceX:P.sourceX,sourceY:P.sourceY,targetX:P.targetX,targetY:P.targetY});return F}},[x,f,i,u,p,h,E,R,_]),l=g.useRef(null),z=Pe();return kt.useDrop({element:l,id:g.useRef(Ze.v4()).current,leave:()=>n(!1),hover:()=>n(P=>P||!0),drop:(P,{x:F,y:te})=>{n(!1),e==null||e({data:P,top:te+-z.top.value,left:F+-z.left.value,target:{type:"line",lineId:c,nodeId:O}})}}),C.jsxs(C.Fragment,{children:[C.jsx("defs",{children:C.jsx("marker",{orient:"auto",refX:2.8*A,refY:2.4*A,markerWidth:10*A,markerHeight:8*A,id:`end-line-arrow-${c}`,children:C.jsx("polygon",{points:`0 ${1*A}, ${3*A} ${2.4*A}, 0 ${4*A}`,stroke:D?"#0f77bf":"gray",fill:D?"#0f77bf":"gray"})})}),!a&&C.jsx("path",{d:M,fill:"none",strokeLinecap:"round",strokeWidth:L,markerEnd:`url(#end-line-arrow-${c})`,stroke:D||o?"#0f77bf":"gray"}),C.jsx(Zt,{top1:f,top2:i,lineId:c,left1:u,left2:p,nodeId:O,width1:h,width2:E,isCurved:x,height1:R,height2:_,lineWidth:L,disableStartDraggable:x,onDragLineEnd:()=>s(!1),onDragLineStart:()=>s(!0)})]})},dn=({node:e})=>{var c;const r=w.useObserverValue(e.height),o=w.useObserverValue(e.width),n=w.useObserverValue(e.left),a=w.useObserverValue(e.top),s=w.useObserverValue(e.id),f=g.useMemo(()=>2.5,[]),i=g.useMemo(()=>1,[]);return(c=e.disableCreateConnections)!=null&&c.call(e)?null:C.jsxs(C.Fragment,{children:[C.jsx("defs",{children:C.jsx("marker",{orient:"auto",refX:2.8*f,refY:2.4*f,markerWidth:10*f,markerHeight:8*f,id:"end-line-arrow-undefined",children:C.jsx("polygon",{points:`0 ${1*f}, ${3*f} ${2.4*f}, 0 ${4*f}`,stroke:"#0f77bf",fill:"#0f77bf"})})}),C.jsx(Zt,{top2:a,top1:a,nodeId:s,left2:n,left1:n,width1:o,width2:o,height2:r,height1:r,lineId:void 0,newConnection:!0,position1FromCenter:!0,lineWidth:i})]})},vn=({backgroundColorDefault:e="#1e1e1e",backgroundColorPaper:r="#484848",backgroundDotColor:o="#484848",backgroundSize:n=30,disableDropInLines:a=!1,onRemove:s,onDrop:f})=>{const i=g.useRef(null),{document:c}=xe.useFrame(),u=Pe(),p=Oe(),O=w.useSetObserver(u.left),h=w.useSetObserver(u.top),{flowStore:E,linesStore:x,selectedItemsId:R}=me(),_=Ht(),D=nt(),A=w.useObserverValue(x),L=w.useObserverValue(E);kt.useDrop({element:i,id:g.useRef(Ze.v4()).current,drop:(l,{x:z,y:P})=>f==null?void 0:f({data:l,target:{type:"board"},top:(P+-u.top.value)/p.value,left:(z+-u.left.value)/p.value})},[u,p]),g.useEffect(()=>{if(!c)return;const l=U=>{Ce(U)&&(U.stopImmediatePropagation(),U.stopPropagation(),U.preventDefault(),U.deltaY<0?w.set(p,N=>N>=2?N:N+.1):w.set(p,N=>N<=.2?N:N-.1))},z=U=>{Ce(U)&&U.key==="a"&&D(E.value.map(N=>N.id.value))},P=U=>{U.key==="Escape"&&D([])},F=U=>{U.key==="Delete"&&R.value.length>0&&(s==null||s(R.value))},te=U=>{const N=U.altKey?30:15;U.key==="ArrowUp"?_(0,-N):U.key==="ArrowRight"?_(N,0):U.key==="ArrowDown"?_(0,N):U.key==="ArrowLeft"&&_(-N,0)};return c.addEventListener("keydown",P,{passive:!1}),c.addEventListener("keydown",te,{passive:!1}),c.addEventListener("keydown",z,{passive:!1}),c.addEventListener("keydown",F,{passive:!1}),c.addEventListener("wheel",l,{passive:!1}),()=>{c.removeEventListener("keydown",P),c.removeEventListener("keydown",te),c.removeEventListener("keydown",z),c.removeEventListener("keydown",F),c.removeEventListener("wheel",l)}},[p,c,R,s,_]);const M=g.useCallback(l=>{const z=l.endY,P=l.endX,F=l.startY,te=l.startX,U=re=>{const ie=re.top.value,Z=re.left.value,G=re.top.value+re.height.value,Q=re.left.value+re.width.value,oe=z-F>0,se=P-te>0,ue=(y,k,S,T)=>(y<=S||k<=S)&&(y>=T||k>=T),v=(y,k,S,T)=>(y>=S||k>=S)&&(y<=T||k<=T);return(oe?v(ie,G,F,z):ue(ie,G,F,z))&&(se?v(Z,Q,te,P):ue(Z,Q,te,P))},N=L.filter(re=>U(re)).map(re=>re.id.value);D(N)},[L,D]);return C.jsx("div",{className:"panel-wrapper",style:{"--color-panel-dot":o,"--color-panel-paper":r,"--color-panel-default":e,backgroundSize:`${n/devicePixelRatio}px ${n/devicePixelRatio}px`},children:C.jsxs("div",{ref:i,className:"panel",onScroll:l=>{h(-l.currentTarget.scrollTop),O(-l.currentTarget.scrollLeft)},onMouseDown:l=>{var z;return(z=i.current)!=null&&z.isSameNode(l.target)?D([]):void 0},children:[C.jsxs(un,{children:[L.map(l=>C.jsx(dn,{node:l},l.id.value)),A.map(l=>C.jsx(fn,{lineIdObservable:l.id,blockIdObservable:l.nodeId,top1Observable:l.top1,top2Observable:l.top2,left1Observable:l.left1,left2Observable:l.left2,width1Observable:l.width1,width2Observable:l.width2,height1Observable:l.height1,height2Observable:l.height2,isCurvedObservable:l.isCurved,onDrop:a?void 0:f},l.key)),C.jsx(ln,{boardRef:i,onCoordsChange:M})]}),C.jsx(cn,{children:L.map(l=>C.jsx(sn,{node:l},l.id.value))})]})})},pn=`
:root {
  --color-panel-paper: #484848;
  --color-panel-default: #1e1e1e;
  --color-panel-dot: #1e1e1e;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
  display: block;
}

.panel-wrapper {
  z-index: 0;
  width: 100vw;
  height: 100vh;
  display: block;
  position: fixed;
  overflow: hidden;
  background-image: radial-gradient(var(--color-panel-dot) 5%, var(--color-panel-default) 5%);
}

.panel {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 0;
  overflow: auto;
  position: fixed;
  background-color: transparent;
}



/* Ajusta o scroll de todos os elementos. */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-corner {
  background-color: transparent;
}

::-webkit-scrollbar:horizontal {
  height: 16px;
}

::-webkit-scrollbar-button {
  display: none;
}

::-webkit-scrollbar-track {
  background-color: transparent;
}

::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: var(--color-panel-paper);
}
`,hn=Gr,yn=({snapGridSize:e=15,items:r,customCSS:o="",...n})=>{const a=g.useMemo(()=>C.jsx(C.Fragment,{children:C.jsx("style",{children:[o,pn,rn].join(`
`)})}),[o]);return C.jsx(hn,{tabIndex:-1,head:a,mountTarget:"body",onContextMenu:s=>s.preventDefault(),initialContent:'<html tabindex="0"><head></head><body style="margin:0;"></body></html>',style:{width:"100%",height:"100%",display:"block",margin:0,padding:0,border:"none"},children:C.jsx(tn,{items:r,children:C.jsx(Zr,{value:e,children:C.jsx(Kr,{value:1,children:C.jsx(en,{children:C.jsx(Jr,{children:C.jsx(vn,{...n})})})})})})})};exports.FlowEditor=yn;
//# sourceMappingURL=index.cjs.js.map
